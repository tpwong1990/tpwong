{% extends "layout.html" %}

{% block title %}
    Summary
{% endblock %}

{% block main %}
<script>
    function DoSubmit(sel)
    {
     if(sel.val()!='0') this.form.submit();
    }
</script>
<form action="/select", method = "post">
<table class = "table">
    <thread>
        <tr>
            <th>Day</th>
            <th>Month</th>
            <th>Year</th>
            <th>Name</th>
            <th>Category</th>
            <th>Expense</th>
            <th>Remarks</th>
        </tr>
    </thread>
    <tbody>
        <tr>
            <td></td>
            <td>
                <select class="form-select mx-auto w-auto" name="month" onchange='DoSubmit()';>
                    <option disabled selected>Month</option>
                    <option value = "All">All</option>
                    {% for mon in months %}
                        <option value = {{ mon["month"] }} >{{ mon["month"] }}</option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        {% for exp in expenses %}
            </tr>
                <td>{{ exp.day }}</td>
                <td>{{ exp.month }}</td>
                <td>{{ exp.year }}</td>
                <td>{{ exp.name }}</td>
                <td>{{ exp.category }}</td>
                <td>{{ exp.expense }}</td>
                <td>{{ exp.remarks }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
</form>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
                {% for message in messages %}
                    <script>window.alert({{ message|tojson }} );</script>
                {% endfor %}
        {% endif %}
    {% endwith %}

{% endblock %}